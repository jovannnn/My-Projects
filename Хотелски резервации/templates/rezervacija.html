<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–†–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ –Ω–∞ —Å–∞–ª–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="stylesheet" href="static/css/animacija.css">
</head>

<body>

<!--–ê–Ω–∏–º–∞—Ü–∏—ò–∞-->
<div id="Animacija"></div>

<div class="container py-5">
    <h2 class="mb-4">–•–æ—Ç–µ–ª –î—Ä–∏–º, –†–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ –Ω–∞ –Ω–∞—Å—Ç–∞–Ω</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div id="flash-poraki">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} mt-3" role="alert">
            {{ message }}
          </div>
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('rezervacija') }}">
        <div class="mb-3">
            <label for="tip_nastan" class="form-label">–¢–∏–ø –Ω–∞ –Ω–∞—Å—Ç–∞–Ω</label>
            <select id="tip_nastan" name="tip_nastan" class="form-select" required>
                <option value="" disabled {% if not request.form.get('tip_nastan') %}selected{% endif %}>–ò–∑–±–µ—Ä–∏ —Ç–∏–ø</option>
                <option value="–°–≤–∞–¥–±–∞" {% if request.form.get('tip_nastan') == '–°–≤–∞–¥–±–∞' %}selected{% endif %}>–°–≤–∞–¥–±–∞</option>
                <option value="–ú–∞—Ç—É—Ä–∞" {% if request.form.get('tip_nastan') == '–ú–∞—Ç—É—Ä–∞' %}selected{% endif %}>–ú–∞—Ç—É—Ä–∞</option>
                <option value="–ü–æ–ª—É–º–∞—Ç—É—Ä–∞" {% if request.form.get('tip_nastan') == '–ü–æ–ª—É–º–∞—Ç—É—Ä–∞' %}selected{% endif %}>–ü–æ–ª—É–º–∞—Ç—É—Ä–∞</option>
                <option value="–†–æ–¥–µ–Ω–¥–µ–Ω" {% if request.form.get('tip_nastan') == '–†–æ–¥–µ–Ω–¥–µ–Ω' %}selected{% endif %}>–†–æ–¥–µ–Ω–¥–µ–Ω</option>
                <option value="–ö—Ä—à—Ç–µ–≤–∫–∞" {% if request.form.get('tip_nastan') == '–ö—Ä—à—Ç–µ–≤–∫–∞' %}selected{% endif %}>–ö—Ä—à—Ç–µ–≤–∫–∞</option>
                <option value="–°—É–Ω–µ—Ç" {% if request.form.get('tip_nastan') == '–°—É–Ω–µ—Ç' %}selected{% endif %}>–°—É–Ω–µ—Ç</option>
                <option value="–î—Ä—É–≥–∞ —Å–≤–µ—á–µ–Ω–æ—Å—Ç" {% if request.form.get('tip_nastan') == '–î—Ä—É–≥–∞ —Å–≤–µ—á–µ–Ω–æ—Å—Ç' %}selected{% endif %}>–î—Ä—É–≥–∞ —Å–≤–µ—á–µ–Ω–æ—Å—Ç</option>
            </select>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="ime" class="form-label">–ò–º–µ</label>
                <input type="text" class="form-control" id="ime" name="ime" placeholder="–ò–º–µ –Ω–∞ –Ω–∞—Ä–∞—á–∞—Ç–µ–ª" required value="{{ request.form.get('ime', '') }}" />
            </div>
            <div class="col-md-6">
                <label for="prezime" class="form-label">–ü—Ä–µ–∑–∏–º–µ</label>
                <input type="text" class="form-control" id="prezime" name="prezime" placeholder="–ü—Ä–µ–∑–∏–º–µ –Ω–∞ –Ω–∞—Ä–∞—á–∞—Ç–µ–ª" required value="{{ request.form.get('prezime', '') }}" />
            </div>
        </div>

<div class="mb-3">
    <label for="drzava" class="form-label">–î—Ä–∂–∞–≤–∞</label>
    <select id="drzava" name="drzava" class="form-select" required>
        <option value="" disabled {% if not request.form.get('drzava') %}selected{% endif %}>–ò–∑–±–µ—Ä–∏ –¥—Ä–∂–∞–≤–∞</option>
        <option value="mk" {% if request.form.get('drzava') == 'mk' %}selected{% endif %}>üá≤üá∞ –ú–∞–∫–µ–¥–æ–Ω–∏—ò–∞</option>
        <option value="al" {% if request.form.get('drzava') == 'al' %}selected{% endif %}>üá¶üá± –ê–ª–±–∞–Ω–∏—ò–∞</option>
        <option value="rs" {% if request.form.get('drzava') == 'rs' %}selected{% endif %}>üá∑üá∏ –°—Ä–±–∏—ò–∞</option>
        <option value="bg" {% if request.form.get('drzava') == 'bg' %}selected{% endif %}>üáßüá¨ –ë—É–≥–∞—Ä–∏—ò–∞</option>
        <option value="gr" {% if request.form.get('drzava') == 'gr' %}selected{% endif %}>üá¨üá∑ –ì—Ä—Ü–∏—ò–∞</option>
        <option value="it" {% if request.form.get('drzava') == 'it' %}selected{% endif %}>üáÆüáπ –ò—Ç–∞–ª–∏—ò–∞</option>
        <option value="fr" {% if request.form.get('drzava') == 'fr' %}selected{% endif %}>üá´üá∑ –§—Ä–∞–Ω—Ü–∏—ò–∞</option>
        <option value="de" {% if request.form.get('drzava') == 'ge' %}selected{% endif %}>üá©üá™ –ì–µ—Ä–º–∞–Ω–∏—ò–∞</option>
        <option value="sw" {% if request.form.get('drzava') == 'sw' %}selected{% endif %}>üá®üá≠ –®–≤–∞—ò—Ü–∞—Ä–∏—ò–∞</option>
        <option value="us" {% if request.form.get('drzava') == 'us' %}selected{% endif %}>üá∫üá∏ –°–ê–î (–ê–º–µ—Ä–∏–∫–∞)</option>
    </select>
</div>

<div class="mb-3">
    <label for="telefon" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω—Å–∫–∏ –±—Ä–æ—ò</label>
    <input type="tel" class="form-control" id="telefon" name="telefon"
        placeholder="–¢–µ–ª–µ—Ñ–æ–Ω—Å–∫–∏ –±—Ä–æ—ò –∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç" required
        value="{{ request.form.get('telefon', '') }}" />
</div>

<script>
    const drzava = document.getElementById("drzava");
    const telefon = document.getElementById("telefon");

    const formati = {
        mk: { pattern: "\\+389-[0-9]{2}-[0-9]{3}-[0-9]{3}", placeholder: "–ü—Ä: +389-70-123-456" },
        al: { pattern: "\\+355-[0-9]{2}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +355-78-123-4567" },
        rs: { pattern: "\\+381-[0-9]{2}-[0-9]{3}-[0-9]{3}", placeholder: "–ü—Ä: +381-70-123-456" },
        bg: { pattern: "\\+391-[0-9]{2}-[0-9]{3}-[0-9]{3}", placeholder: "–ü—Ä: +391-87-123-456" },
        gr: { pattern: "\\+30-[0-9]{3}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +30-210-123-4567" },
        it: { pattern: "\\+39-[0-9]{2}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +39-64-123-4567" },
        fr: { pattern: "\\+33-[0-9]{2}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +33-64-123-4567" },
        de: { pattern: "\\+49-[0-9]{2}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +49-64-123-4567" },
        sw: { pattern: "\\+41-[0-9]{2}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +41-64-123-4567" },
        us: { pattern: "\\+1-[0-9]{2}-[0-9]{3}-[0-9]{4}", placeholder: "–ü—Ä: +1-64-123-4567" }
    };

    drzava.addEventListener("change", function () {
        let val = this.value;
        if (formati[val]) {
            telefon.setAttribute("pattern", formati[val].pattern);
            telefon.setAttribute("placeholder", formati[val].placeholder);
        } else {
            telefon.removeAttribute("pattern");
            telefon.setAttribute("placeholder", "–¢–µ–ª–µ—Ñ–æ–Ω—Å–∫–∏ –±—Ä–æ—ò –∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç");
        }
    });
</script>

        <div class="mb-3">
            <label for="broj_gosti" class="form-label">–ë—Ä–æ—ò –Ω–∞ –≥–æ—Å—Ç–∏</label>
            <input type="number" class="form-control" id="broj_gosti" name="broj_gosti" min="1" placeholder="–í–Ω–µ—Å–µ—Ç–µ –±—Ä–æ—ò –Ω–∞ –≥–æ—Å—Ç–∏" required value="{{ request.form.get('broj_gosti', '') }}" />
        </div>

        <div class="mb-3">
            <label for="datum" class="form-label">–î–∞—Ç—É–º</label>
            <input type="date" class="form-control" id="datum" name="datum" required value="{{ request.form.get('datum', '') }}" />
        </div>

        <div class="mb-3">
            <label for="sala" class="form-label">–ò–∑–±–µ—Ä–∏ —Å–∞–ª–∞</label>
            <select id="sala" name="tip_sala" class="form-select" required>
                <option value="" disabled {% if not request.form.get('tip_sala') %}selected{% endif %}>–ò–∑–±–µ—Ä–∏ —Å–∞–ª–∞</option>
                {% for sala in slobodni_sali %}
                <option value="{{ sala | lower }}" {% if request.form.get('tip_sala') == sala | lower %}selected{% endif %}>{{ sala }}</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-custom">–†–µ–∑–µ—Ä–≤–∏—Ä–∞—ò</button>
    </form>

<!--–°–∫—Ä–∏–ø—Ç–∞ –∑–∞ –±—Ä–∏—à–µ—ö–µ –Ω–∞ alert –ø–æ—Ä–∞–∫–∏ –ø–æ—Å–ª–µ 5 —Å–µ–∫—É–Ω–¥–∏ –≤–æ —Ñ–æ—Ä–º–∞—Ç–∞-->
<script>
  setTimeout(function() {
    const flashMessages = document.getElementById('flash-poraki');
    if (flashMessages) {
      flashMessages.style.transition = 'opacity 1s ease-out';
      flashMessages.style.opacity = '0';
      setTimeout(() => flashMessages.remove(), 1000); 
    }
  }, 5000);
</script>

<script src="static/css/animacija.js"></script>

</div>
</body>
</html>

